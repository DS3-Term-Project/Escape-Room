<html>

<head>
    <meta charset="utf-8">
    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts />


    <link rel="stylesheet" href="HUD.css">

</head>

<body>
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui />

    <!-- Tamper Button -->
    <button id="tamper-button" style="display:none;">Tamper</button>

    <!-- Puzzle Overlays -->
    <div id="ui-overlay">
      <!-- Clock Puzzle Interaction UI -->
      <div id="clock-overlay">
        <div id="hour-hand"></div>
        <div id="minute-hand"></div>
      </div>
      <div id="time-display">12:00</div>

      <!-- Lock Puzzle Interaction UI -->
      <div id="lock-overlay" style="display: flex;">
        <div class="digit-container">
          <button class="increment">&#x25B2;</button> <!-- Up arrow -->
          <div class="digit">9</div>
          <button class="decrement">&#x25BC;</button> <!-- Down arrow -->
        </div>
        <div class="digit-container">
          <button class="increment">&#x25B2;</button> <!-- Up arrow -->
          <div class="digit">9</div>
          <button class="decrement">&#x25BC;</button> <!-- Down arrow -->
        </div>
        <div class="digit-container">
          <button class="increment">&#x25B2;</button> <!-- Up arrow -->
          <div class="digit">9</div>
          <button class="decrement">&#x25BC;</button> <!-- Down arrow -->
        </div>
        <div class="digit-container">
          <button class="increment">&#x25B2;</button> <!-- Up arrow -->
          <div class="digit">9</div>
          <button class="decrement">&#x25BC;</button> <!-- Down arrow -->
        </div>
      </div>
    </div>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties background="color:black">

        <a-assets timeout="10000">
            <!-- Circles' built-in assets [REQUIRED] -->
            <circles-assets />

            <!-- assets -->

            <audio id="ding1" crossorigin="anonymous" preload="auto" src="assets/audio/ding1.mp3"></audio>
            <audio id="ding2" crossorigin="anonymous" preload="auto" src="assets/audio/ding2.mp3"></audio>
            <audio id="garage" crossorigin="anonymous" preload="auto" src="assets/audio/garagedoor2.mp3"></audio>

            <a-asset-item id="Clipboard-gltf" src="/worlds/WIT_2_Lab/assets/models/clipboard/scene.gltf"response-type="arraybuffer"></a-asset-item>

            <a-asset-item id="plant" src="assets/models/plant.glb" response-type="arraybuffer"crossorigin="anonymous"></a-asset-item>

            <a-asset-item id="tableRect" src="assets/models/table_rect.glb" response-type="arraybuffer"crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="tableRound" src="assets/models/table_round.glb" response-type="arraybuffer"crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="tableHigh" src="assets/models/table_high.glb" response-type="arraybuffer"crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="tableDesk" src="assets/models/table_desk.glb" response-type="arraybuffer"crossorigin="anonymous"></a-asset-item>
            
            <a-asset-item id="couch" src="assets/models/couch.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="chair" src="assets/models/chair.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="chairHigh" src="assets/models/chair_high.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="chairOffice" src="assets/models/chair_office.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="chairLounge" src="assets/models/chair_lounge.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

            <a-asset-item id="whiteboard" src="assets/models/whiteboard_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="whiteboardStand1" src="assets/models/whiteboardStand1_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="whiteboardStand2" src="assets/models/whiteboardStand2_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="whiteboardStand3" src="assets/models/whiteboardStand3_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            
            <a-asset-item id="corkboard" src="assets/models/corkboard_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

            <a-asset-item id="clock" src="assets/models/clock_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="clockOpen" src="assets/models/clockOpen_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

            <a-asset-item id="briefcase" src="assets/models/briefcase_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="briefcaseOpen" src="assets/models/briefcaseOpen_obj.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        </a-assets>

        <!-- Circles' built-in manager and avatar [REQUIRED] -->
        <circles-manager-avatar />

        <a-entity class="ground" geometry="primitive:plane; width:28; height:28;" material="color:#8d97ff;" position="0 0.01 0" rotation="-90 0 0" shadow="cast:false; receive:true;"></a-entity>
        <a-entity class="ceiling" geometry="primitive:plane; width:28; height:28;" material="color:#1d1b1d;" position="0 6.99 0" rotation="90 0 0" shadow="cast:false; receive:true;"></a-entity>

        <!--top wall-->
        <!--
        <a-entity class="wall" geometry="primitive:plane; width:28; height:12;" material="color:#e6e4f0;" position="7 2 0"
            rotation="0 -90 0" shadow="cast:false; receive:true;"></a-entity>
        -->
        <!--bottom walls-->
        
        <a-entity class="wall" geometry="primitive:plane; width:8; height:12;" material="color:#e6e4f0;" position="-7 2 7" rotation="0 90 0" shadow="cast:false; receive:true;"></a-entity>
        <a-entity class="wall" geometry="primitive:plane; width:8; height:12;" material="color:#e6e4f0;" position="-7 2 -7" rotation="0 90 0" shadow="cast:false; receive:true;"></a-entity>
        <a-entity class="wall" geometry="primitive:plane; width:7; height:12;" material="color:#e6e4f0;" position="-7 2 14" rotation="0 90 0" shadow="cast:false; receive:true;"></a-entity>
        <a-entity class="wall" geometry="primitive:plane; width:7; height:12;" material="color:#e6e4f0;" position="-7 2 -14" rotation="0 90 0" shadow="cast:false; receive:true;"></a-entity>

        <a-entity class="wall" geometry="primitive: plane; width: 28; height:12" material="color: #e6e4f0" position="7 2 -6" rotation="0 -90 0" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 7; height:12" material="color: #e6e4f0" position="7 2 15.5" rotation="0 -90 0" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 7; height:12" material="color: #e6e4f0" position="10.5 2 8" rotation="" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 7; height:12" material="color: #e6e4f0" position="10.5 2 12" rotation="0 180 0" shadow="cast: false"></a-entity>
        <a-entity class="wall" geometry="primitive: plane; width: 7; height:12" material="color: #e6e4f0" position="14 2 10.5" rotation="0 -90 0" shadow="cast: false"></a-entity>
        
        <a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -9" rotation="0 180 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="5.5 2 -8" rotation="0 -90 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -7" rotation="" shadow="cast: false"></a-entity>
        </a-entity>
        <a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -5.5" rotation="0 180 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="5.5 2 -4.5" rotation="0 -90 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -3.5" rotation="" shadow="cast: false"></a-entity>
        </a-entity>
        <a-entity position="0 0 11.5">
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -5.5" rotation="0 180 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="5.5 2 -4.5" rotation="0 -90 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -3.5" rotation="" shadow="cast: false"></a-entity>
        </a-entity>
        <a-entity position="-12.5 0 11.5">
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -5.5" rotation="0 180 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="7.5 2 -4.5" rotation="0 90 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -3.5" rotation="" shadow="cast: false"></a-entity>
        </a-entity>

        <a-entity position="-12.5 0 0">
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -9" rotation="0 180 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="7.5 2 -8" rotation="0 90 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -7" rotation="" shadow="cast: false"></a-entity>
        </a-entity>
        <a-entity position="-12.5 0 0">
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -5.5" rotation="0 180 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="7.5 2 -4.5" rotation="0 90 0" shadow="cast: false"></a-entity>
            <a-entity class="wall" geometry="primitive: plane; width: 2; height:12" material="color: #e6e4f0" position="6.5 2 -3.5" rotation="" shadow="cast: false"></a-entity>
        </a-entity>

        <!--side walls-->
        <a-entity class="wall" geometry="primitive:plane; width:14; height:12;" material="color:#e6e4f0;" position="0 2 14" rotation="0 180 0" shadow="cast:false; receive:true;"></a-entity>
        <a-entity class="wall" geometry="primitive:plane; width:14; height:12;" material="color:#e6e4f0;" position="0 2 -14" rotation="0 0 0" shadow="cast:false; receive:true;"></a-entity>
        <a-entity class="wall" geometry="primitive:plane; width:6; height:4;" material="color:#e6e4f0;" position="-7.01 6 0" rotation="0 90 0" shadow="cast:false; receive:true;"></a-entity>

            <a-entity id="door" position="13.9 1.5 10" rotation="0 -90 0">
                <a-entity geometry="primitive:plane; width:2; height:3;" material="color:#d2a26d;"
                    shadow="cast:false; receive:true;"></a-entity>
                <a-entity id="Portal-Hub" rotation="0 -90 0"
                    circles-portal="img_src:/global/assets/textures/equirectangular/PurpleBlue.jpg; title_text:Hub; link_url:/w/Escape_Hub"></a-entity>
                <a-entity circles-checkpoint circles-spawnpoint position="0 -1.5 1.5"></a-entity>
            </a-entity>        

        <!--
            top wall of room x=7
            bottom wall of room x=-7
            left wall of room z=-14
            right wall of room z=14
        -->

        <!-- left side of room -->
        <a-entity circles-checkpoint position="-1 0 -10"></a-entity>
        <a-entity circles-checkpoint position="5 0 -8"></a-entity>
        <a-entity circles-checkpoint position="-4 0 -8"></a-entity>

        <a-entity gltf-model="#tableRound" position="2 0 -8" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairLounge" position="3.2 0 -7.8" rotation="0 180 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairLounge" position="2 0 -7.8" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairLounge" position="2 0 -9.5" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairLounge" position="3.2 0 -9.5" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableRect" position="-5 0 -11.5" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#couch" position="-6 0 -11.5" rotation="0 90 0" scale="0.15 0.15 0.15" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairLounge" position="-4 0 -10.5" rotation="0 180 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairLounge" position="-4 0 -12.5" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        
        <a-entity gltf-model="#tableDesk" position="5 -0.19 -12.5" rotation="0 90 0" scale="0.5 0.75 0.75" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#tableDesk" position="3.5 -0.19 -13.25" rotation="0 0 0" scale="0.5 0.75 0.75" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="6 0 -12.5" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <!-- center of room -->
        <a-entity circles-checkpoint position="-5 0 0"></a-entity>

        <a-entity gltf-model="#tableRect" position="0 0 2" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="0 0 3" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="0 0 1" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableRect" position="5 0 0" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="4.5 0 1" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="5.5 0 1" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="5.5 0 -1" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="4.5 0 -1" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableRect" position="0 0 -5" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="-0.45 0 -4" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="0.5 0 -4" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="0.5 0 -6" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairOffice" position="-0.45 0 -6" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableHigh" position="-4 0 -4.5" rotation="0 0 0" scale="0.65 0.65 0.65" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="-4.5 0 -3.5" rotation="0 -90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="-4.5 0 -5.5" rotation="0 90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableHigh" position="4.5 0 -4.5" rotation="0 0 0" scale="0.65 0.65 0.65" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="4.5 0 -3.5" rotation="0 -90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="4.5 0 -5.5" rotation="0 90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>

        <a-entity id="Artifact-Briefcase" class="interactive narrative" position="-0.5 0.82 2" rotation="0 0 0"
            scale="1 1 1" gltf-model="#briefcase" shadow="receive:false; cast:false;"
            circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg" circles-artefact="inspectScale:1.2 1.2 1.2;
                        label_offset:0 0.35 0; arrow_position:down;
                        title:Old Briefcase;
                        description:Search the lab for clues;
                        title_back:;
                        description_back:;
                        label_text:Briefcase;"></a-entity>

        <a-entity id="Artifact-Clipboard" class="interactive narrative" position="0.5 0.82 -5" rotation="-90 15 0.0"
            scale="1 1 1" gltf-model="#Clipboard-gltf" shadow="receive:false; cast:false;"
            circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg" circles-artefact="inspectScale:1.2 1.2 1.2;
                        label_offset:0 0.35 0; arrow_position:down;
                        title:Planetary Alignment;
                        description:Planetary alignment is a celestial event when the planets in our Solar System appear close together in the sky. Consider the time when planets align. 

                        PLANETARY ALIGNMENT: ETA [Saturn:VenusUranus];
                        title_back:Planetary Alignment;
                        description_back:Planetary alignment is a celestial event when the planets in our Solar System appear close together in the sky. Consider the time when planets align. 

                        PLANETARY ALIGNMENT: ETA [Saturn:VenusUranus];;
                        label_text:Clipboard;"></a-entity>

            <a-entity id="Artifact-Clock" class="interactive narrative" gltf-model="#clock" position="5 0.85 0" rotation="0 0 0"
            scale="1 1 1" shadow="receive:false; cast:false;"
            circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg" circles-artefact="inspectScale:1 1 1;
                        label_offset:0 1.2 0; arrow_position:down;
                        title:Antique Clock;
                        description:Search the lab for clues;
                        title_back:;
                        description_back:;
                        label_text:Clock;"></a-entity>

        <a-entity gltf-model="#whiteboard" position="-5.5 0 -6.25" rotation="0 0 0" scale="35 35 35" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#whiteboardStand1" position="-4.75 0 -8" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#whiteboardStand2" position="5.5 0 -2.8" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#whiteboardStand3" position="3 0 13.95" rotation="0 180 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#corkboard" position="6 0 3.5" rotation="0 -90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#plant" position="6 0 5.5" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#plant" position="-6 0 13" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#plant" position="-6.5 0 -13" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#plant" position="-6.5 0 -10" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity id="exit_button" circles-button="pedastal_color:rgb(74, 87, 95);" open-door position="-7 1.5 4" rotation="0 0 -90" scale="0.8 0.8 0.8"></a-entity>
        <a-entity id="exit_door" geometry="primitive:plane; width:6; height:4;" material="color:#3a3739;" position="-7 2 0" rotation="0 90 0"></a-entity>
        <a-entity id="Portal-Hub" position="-8 2 0" rotation="0 0 0"
            circles-portal="img_src:/global/assets/textures/equirectangular/PurpleBlue.jpg; title_text:Escape; link_url:/w/Escape_Hub"></a-entity>

        <!-- right side of room -->
        <a-entity circles-checkpoint position="0 0 7"></a-entity>
        <a-entity circles-checkpoint position="-4 0 12"></a-entity>
        <a-entity circles-checkpoint position="0 0 12"></a-entity>
        <a-entity circles-checkpoint position="4 0 12"></a-entity>

        <a-entity gltf-model="#tableHigh" position="6 0 12" rotation="0 0 0" scale="0.65 0.65 0.65" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="4.5 0 6" rotation="0 90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="4.5 0 8" rotation="0 -90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableHigh" position="4.5 0 7" rotation="0 0 0" scale="0.65 0.65 0.65" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="6 0 13" rotation="0 -90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="5 0 12" rotation="0 180 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableHigh" position="-4.5 0 7" rotation="0 0 0" scale="0.65 0.65 0.65" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="-4.5 0 8" rotation="0 -90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chairHigh" position="-4.5 0 6" rotation="0 90 0" scale="0.5 0.5 0.5" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#tableRect" position="-4 0 13.25" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#tableRect" position="-1.75 0 13.25" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#tableRect" position="0.5 0 13.25" rotation="0 90 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <a-entity gltf-model="#chair" position="-6 0 9" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-6 0 9.6" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-6 0 10.2" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-6 0 10.8" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-6 0 11.4" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-6 0 12.0" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-5.3 0 9" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-5.3 0 9.6" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-5.3 0 10.2" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-5.3 0 10.8" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-5.3 0 11.4" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>
        <a-entity gltf-model="#chair" position="-5.3 0 12.0" rotation="0 0 0" scale="1 1 1" shadow="cast:true; receive:false;"></a-entity>

        <!--
            top is x=7
            bottom is x=-7
            left is z=-14
            right is z=14
        -->

        <!--
        <a-entity id="door" position="6.99 1.5 10" rotation="0 -90 0">
            <a-entity geometry="primitive:plane; width:2; height:3;" material="color:#d2a26d;"
                shadow="cast:false; receive:true;"></a-entity>
            <a-entity id="Portal-Hub" rotation="0 -90 0"
                circles-portal="img_src:/global/assets/textures/equirectangular/PurpleBlue.jpg; title_text:Hub; link_url:/w/Escape_Hub"></a-entity>
            <a-entity circles-checkpoint circles-spawnpoint position="0 -1.5 1.5"></a-entity>
        </a-entity>
        -->

        <!-- lights -->
        <a-entity light="type: ambient; color: white; intensity:2.0"></a-entity>

        <!--telepresence robot-->
        <!--
        <a-entity id="helper" position="0 0 4" rotation="0 0 0">
            <a-entity geometry="primitive: cone; height: 0.15; radiusBottom: 0.2; radiusTop: 0.15" material="color:#778899" position="0 0.2 -0.15" rotation="90 0 0"></a-entity>
            <a-entity geometry="primitive: cone; height: 0.15; radiusBottom: 0.2; radiusTop: 0.15" material="color:#778899" position="0 0.2 0.15" rotation="-90 0 0"></a-entity>
            <a-entity geometry="primitive: cylinder; height: 0.15; radius: 0.15" material="color:#2F4F4F" position="0 0.2 0" rotation="-90 0 0"></a-entity>
            <a-entity geometry="primitive: cylinder; height: 1.5; radius: 0.03" material="color:#778899" position="0 0.8 0" rotation="0 0 0"></a-entity>
            <a-entity geometry="primitive: box; width: 0.1; height: 0.4; depth: 0.3" material="color:#2F4F4F" position="0 1.5 0" rotation="0 0 0">
                <a-entity geometry="primitive:plane; width:0.2; height:0.3;" material="src:#gigablake" position="0.051 0 0" rotation="0 90 0"></a-entity>
            </a-entity>
        </a-entity>
    -->


    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts />

    <!-- Check Object Held -->
    <script>
        
      let isTampering = false;

      function checkIfObjectIsHeld() {
        const heldObject = CIRCLES.getPickedUpElement();
        const tamperButton = document.getElementById('tamper-button');
        const uiOverlay = document.getElementById('ui-overlay');
        const clockOverlay = document.getElementById('clock-overlay');
        const timeDisplay = document.getElementById('time-display');
        const lockOverlay = document.getElementById('lock-overlay');

        function hideOverlays() {
          uiOverlay.style.display = 'none';
          clockOverlay.style.display = 'none';
          timeDisplay.style.display = 'none';
          lockOverlay.style.display = 'none';
          if (!isTampering) {
            tamperButton.style.display = 'none';
          }
        }

        if (!isTampering) {
          hideOverlays();
        }

        if (heldObject !== null && (heldObject.id === "Artifact-Clock" || heldObject.id === "Artifact-Briefcase") && !isTampering) {
          tamperButton.style.display = 'block';
          tamperButton.onclick = () => {
            isTampering = true;
            uiOverlay.style.display = 'block';
            tamperButton.style.display = 'none';

            if (heldObject.id === "Artifact-Clock") {
              clockOverlay.style.display = 'block';
              timeDisplay.style.display = 'block';
            } else if (heldObject.id === "Artifact-Briefcase") {
              lockOverlay.style.display = 'flex';
            }
          };
        } else if (!heldObject || (heldObject.id !== "Artifact-Clock" && heldObject.id !== "Artifact-Briefcase")) {
          isTampering = false;
          hideOverlays();
        }
      }

      // Set up an interval to periodically check for a held object
      setInterval(checkIfObjectIsHeld, 1000);
    </script>


    <!-- Clock Code -->

    <script>
        var clockSolved = false;
      document.addEventListener('DOMContentLoaded', (event) => {
        const clockOverlay = document.getElementById('clock-overlay');
        const rect = clockOverlay.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;

        function calculateTimeFromAngles(hourAngle, minuteAngle) {
          minuteAngle -= 90;
          hourAngle -= 3 * 30; // Each hour is 30 degrees

          // Ensure angles are within 0-360 range after adjustment
          hourAngle = (hourAngle + 360) % 360;
          minuteAngle = (minuteAngle + 360) % 360;

          // Calculate minutes
          let minutes = Math.floor((minuteAngle / 360) * 60); // Use floor to avoid hitting 60

          // Calculate hours, including the partial hour indicated by the minute hand
          let hours = Math.floor((hourAngle / 360) * 12);
          hours = hours % 12;
          hours = hours === 0 ? 12 : hours; // Adjust so 0 becomes 12

          // Adjust minutes to avoid displaying 60
          if (minutes >= 60) {
            minutes = 59; // Ensuring minutes don't display as 60
          }

          // Adjust hours and minutes for display
          const roundedHours = hours.toString().padStart(2, '0');
          const roundedMinutes = minutes.toString().padStart(2, '0');

          // Update the time display div
          const timeDisplay = document.getElementById('time-display');
          timeDisplay.textContent = `${roundedHours}:${roundedMinutes}`;

          // Change color if the time is 12:25 (the code)
          if (timeDisplay.textContent === "12:25") {
            timeDisplay.style.color = 'green';
            clockSolved = true;
            document.querySelector('#ding1').play();
          } else {
            timeDisplay.style.color = 'black';
          }
        }


        function getRotationDegrees(obj) {
          var matrix = window.getComputedStyle(obj, null).getPropertyValue('transform');
          var angle = 0;
          if (matrix !== 'none') {
            var values = matrix.split('(')[1].split(')')[0].split(',');
            var a = values[0];
            var b = values[1];
            angle = Math.round(Math.atan2(b, a) * (180 / Math.PI));
          }
          return angle + 90;
        }

        function onMouseUp() {
          const hourAngle = getRotationDegrees(document.getElementById('hour-hand'));
          const minuteAngle = getRotationDegrees(document.getElementById('minute-hand'));
          calculateTimeFromAngles(hourAngle, minuteAngle);
        }

        function rotateHand(handId, event) {
          const hand = document.getElementById(handId);
          const mouseX = event.clientX - centerX;
          const mouseY = event.clientY - centerY;
          const angleRad = Math.atan2(mouseY, mouseX);
          const angleDeg = angleRad * (180 / Math.PI) + 90;
          hand.style.transform = `rotate(${angleDeg}deg)`;
        }

        ['hour-hand', 'minute-hand'].forEach(handId => {
          document.getElementById(handId).addEventListener('mousedown', function(event) {
            event.preventDefault();
            function onMouseMove(event) {
              rotateHand(handId, event);
            }
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', function mouseUpListener() {
              document.removeEventListener('mousemove', onMouseMove);
              document.removeEventListener('mouseup', mouseUpListener);
              onMouseUp(); // Calculate and log the time
            });
          });
        });
      });
    </script>


    <!-- Lock Code -->
    <script>
       var lockSolved = false;
      document.addEventListener('DOMContentLoaded', () => {
        const incrementButtons = document.querySelectorAll('.increment');
        const decrementButtons = document.querySelectorAll('.decrement');

        function updateDigitColor() {
          const digits = document.querySelectorAll('.digit');
          const currentCombination = Array.from(digits).map(digit => digit.textContent).join('');
          const color = currentCombination === '1212' ? 'green' : 'black';
            
          digits.forEach(digit => {
            digit.style.color = color;
          });

          if (currentCombination === '1212') {
            lockSolved = true;
            document.querySelector('#ding2').play();
          }

        }

        incrementButtons.forEach(button => {
          button.addEventListener('click', () => {
            const digitDiv = button.nextElementSibling;
            let digit = parseInt(digitDiv.textContent, 10);
            digit = (digit + 1) % 10;
            digitDiv.textContent = digit;
            updateDigitColor();
          });
        });

        decrementButtons.forEach(button => {
          button.addEventListener('click', () => {
            const digitDiv = button.previousElementSibling;
            let digit = parseInt(digitDiv.textContent, 10);
            digit = (digit - 1 + 10) % 10;
            digitDiv.textContent = digit;
            updateDigitColor();
          });
        });

        updateDigitColor();
      });
    </script>

    <script>
        const exitDoor = document.querySelector("#exit_door");
        const btn = document.querySelector("#exit_button");

        btn.addEventListener('click', () => {
            
            if (lockSolved && clockSolved){
                document.querySelector('#garage').play();
                exitDoor.setAttribute('animation', {
                    property: 'position',
                    dur: 10000,
                    from: "-7 2 0",
                    to: "-7 6 0"
                });
            }
        });
    </script>


</body>

</html>
